{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template block_course_checker_info/block

    This template renders a checker result row in the block result table
    - the checkername_display is a short description of the checker
    - an icon is displayed if the checker was successful

    Example context (json):
    {
        "actionurl":"https://example.com/action",
        "courseid":"3",
        "sesskey":"key",
        "returnurl":"https://example.com/return",
        "reporturl":"https://example.com/reporturl",
        "timestamp":"A date",
        "successful":77,
        "failed":23
    }
}}
<span class="text-left">{{#str}}checker_last_run, local_course_checker, {{#timestamp}}{{timestamp}}{{/timestamp}}{{^timestamp}}{{#str}}checker_never_run, local_course_checker{{/str}}{{/timestamp}}{{/str}}</span>
{{#in_progress}}
    <div class="progress" id="course-checker-progress-container">
        <div class="progress-bar progress-bar-striped progress-bar-animated bg-info" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">{{#str}}check_course_in_progress, local_course_checker{{/str}}</div>
    </div>
{{/in_progress}}
{{^in_progress}}
    <div class="progress" id="course-checker-progress-container">
        {{#error}}
            <div class="progress-bar progress-bar-striped bg-danger" role="progressbar" aria-valuenow="{{.}}" aria-valuemin="0" aria-valuemax="100" style="width: {{.}}%"></div>
        {{/error}}
        {{#failed}}
            <div class="progress-bar bg-danger" role="progressbar" aria-valuenow="{{.}}" aria-valuemin="0" aria-valuemax="100" style="width: {{.}}%"></div>
        {{/failed }}
        {{#warning}}
            <div class="progress-bar bg-warning" role="progressbar" aria-valuenow="{{.}}" aria-valuemin="0" aria-valuemax="100" style="width: {{.}}%"></div>
        {{/warning }}
        {{#successful}}
            <div class="progress-bar bg-success" role="progressbar" aria-valuenow="{{.}}" aria-valuemin="0" aria-valuemax="100" style="width: {{.}}%"></div>
        {{/successful}}
    </div>
{{/in_progress}}
<hr>
{{#in_progress}}
    <button type="button" class="btn btn-primary btn-block" disabled>{{#str}}check_course_in_progress, local_course_checker{{/str}}</button>
{{/in_progress}}
{{^in_progress}}
    <form method="get" action="{{actionurl}}">
        <input type="hidden" name="action" value="run_all_checks">
        <input type="hidden" name="courseid" value="{{courseid}}">
        <input type="hidden" name="sesskey" value="{{sesskey}}">
        <input type="hidden" name="returnurl" value="{{returnurl}}">
        <button type="submit" class="btn btn-primary btn-block">{{#str}}check_course, local_course_checker{{/str}}</button>
    </form>
{{/in_progress}}
{{#timestamp}}<a href="{{reporturl}}" class="btn btn-secondary btn-block mt-2">{{#str}}messageprovider_result_label, local_course_checker{{/str}}</a>{{/timestamp}}
